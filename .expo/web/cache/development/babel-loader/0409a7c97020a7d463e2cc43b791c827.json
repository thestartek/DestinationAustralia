{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport React, { useEffect, useState } from \"react\";\nimport { auth, db } from \"../../Firebase\";\nimport { onSnapshot, doc, updateDoc, arrayUnion } from \"firebase/firestore\";\nimport { TouchableOpacity } from \"react-native-gesture-handler\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar user = auth.currentUser;\nvar AddComment = function AddComment(_ref) {\n  var post = _ref.post;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    currentLoggedInUser = _useState2[0],\n    setCurrentLoggedInUser = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    comment = _useState4[0],\n    setComment = _useState4[1];\n  var getUserDetails = function getUserDetails() {\n    var unsubscribe = onSnapshot(doc(db, \"users\", auth.currentUser.email), function (doc) {\n      setCurrentLoggedInUser({\n        fullname: doc.data().fullname,\n        profile_picture: doc.data().profile_picture\n      });\n    });\n    return unsubscribe;\n  };\n  useEffect(function () {\n    getUserDetails();\n  }, []);\n  var handleComment = function handleComment() {\n    updateDoc(doc(db, \"posts\", post.id), {\n      comments: arrayUnion({\n        image: currentLoggedInUser.profile_picture,\n        user: currentLoggedInUser.fullname,\n        comment: comment\n      })\n    });\n  };\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(View, {\n      children: currentLoggedInUser.profile_picture != null ? _jsx(Image, {\n        style: styles.imageIcon,\n        source: {\n          uri: currentLoggedInUser.profile_picture\n        }\n      }) : _jsx(Image, {\n        style: [styles.imageIcon, {\n          tintColor: \"grey\"\n        }],\n        source: {\n          uri: \"https://firebasestorage.googleapis.com/v0/b/journeytoaustralia-b21d4.appspot.com/o/icons%2FprofileIcon.png?alt=media&token=e822d7b0-f1a7-4d58-ae70-83e1b3952026\"\n        }\n      })\n    }), _jsx(TextInput, {\n      placeholder: \"Add a comment\",\n      autoCapitalize: \"none\",\n      multiline: true,\n      value: comment,\n      onChangeText: function onChangeText(text) {\n        return setComment(text);\n      },\n      style: styles.textInput\n    }), !comment ? _jsx(Text, {\n      style: styles.sendButtonDisabled,\n      children: \"Send\"\n    }) : _jsx(TouchableOpacity, {\n      onPress: handleComment,\n      children: _jsx(Text, {\n        style: styles.sendButton,\n        children: \"Send\"\n      })\n    })]\n  });\n};\nexport default AddComment;\nvar styles = StyleSheet.create({\n  container: {\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    flexDirection: \"row\",\n    marginHorizontal: 25,\n    marginVertical: 5\n  },\n  commentContainer: {},\n  imageIcon: {\n    width: 28,\n    height: 28,\n    borderRadius: 14\n  },\n  textInput: {\n    backgroundColor: \"white\",\n    padding: 12,\n    borderRadius: 10,\n    borderWidth: 1.5,\n    borderColor: \"lightgrey\",\n    marginVertical: 5,\n    width: 250,\n    maxHeight: 100\n  },\n  sendButton: {\n    color: \"#1267E9\",\n    fontWeight: \"bold\"\n  },\n  sendButtonDisabled: {\n    color: \"grey\",\n    fontWeight: \"bold\"\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","auth","db","onSnapshot","doc","updateDoc","arrayUnion","TouchableOpacity","user","currentUser","AddComment","post","currentLoggedInUser","setCurrentLoggedInUser","comment","setComment","getUserDetails","unsubscribe","email","fullname","data","profile_picture","handleComment","id","comments","image","styles","container","imageIcon","uri","tintColor","text","textInput","sendButtonDisabled","sendButton","StyleSheet","create","alignItems","justifyContent","flexDirection","marginHorizontal","marginVertical","commentContainer","width","height","borderRadius","backgroundColor","padding","borderWidth","borderColor","maxHeight","color","fontWeight"],"sources":["/Users/startek/LocalRepo/journeytoaustralia/components/post/AddComment.js"],"sourcesContent":["import { View, Text, StyleSheet, Image, TextInput } from \"react-native\";\nimport React, { useEffect, useState } from \"react\";\nimport { auth, db } from \"../../Firebase\";\nimport { onSnapshot, doc, updateDoc, arrayUnion } from \"firebase/firestore\";\nimport { TouchableOpacity } from \"react-native-gesture-handler\";\n\nconst user = auth.currentUser;\n\nconst AddComment = ({ post }) => {\n  const [currentLoggedInUser, setCurrentLoggedInUser] = useState([]);\n  const [comment, setComment] = useState(null);\n\n  const getUserDetails = () => {\n    const unsubscribe = onSnapshot(\n      doc(db, \"users\", auth.currentUser.email),\n      (doc) => {\n        setCurrentLoggedInUser({\n          fullname: doc.data().fullname,\n          profile_picture: doc.data().profile_picture,\n        });\n      }\n    );\n    return unsubscribe;\n  };\n\n  useEffect(() => {\n    getUserDetails();\n  }, []);\n\n  const handleComment = () => {\n    updateDoc(doc(db, \"posts\", post.id), {\n      comments: arrayUnion({\n        image: currentLoggedInUser.profile_picture,\n        user: currentLoggedInUser.fullname,\n        comment: comment,\n      }),\n    });\n  };\n\n  // const handleLike = (post) => {\n  //   const currentLikeStatus = !post.likes.includes(user.email);\n  //   updateDoc(doc(db, \"posts\", post.id), {\n  //     likes: currentLikeStatus\n  //       ? arrayUnion(user.email)\n  //       : arrayRemove(user.email),\n  //   });\n  // };\n\n  return (\n    <View style={styles.container}>\n      <View>\n        {currentLoggedInUser.profile_picture != null ? (\n          <Image\n            style={styles.imageIcon}\n            source={{ uri: currentLoggedInUser.profile_picture }}\n          />\n        ) : (\n          <Image\n            style={[styles.imageIcon, { tintColor: \"grey\" }]}\n            source={{\n              uri: \"https://firebasestorage.googleapis.com/v0/b/journeytoaustralia-b21d4.appspot.com/o/icons%2FprofileIcon.png?alt=media&token=e822d7b0-f1a7-4d58-ae70-83e1b3952026\",\n            }}\n          />\n        )}\n      </View>\n      <TextInput\n        placeholder=\"Add a comment\"\n        autoCapitalize=\"none\"\n        multiline={true}\n        //autoFocus={true}\n        value={comment}\n        onChangeText={(text) => setComment(text)}\n        style={styles.textInput}\n      />\n      {!comment ? (\n        <Text style={styles.sendButtonDisabled}>Send</Text>\n      ) : (\n        <TouchableOpacity onPress={handleComment}>\n          <Text style={styles.sendButton}>Send</Text>\n        </TouchableOpacity>\n      )}\n    </View>\n  );\n};\n\nexport default AddComment;\n\nconst styles = StyleSheet.create({\n  container: {\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    flexDirection: \"row\",\n    marginHorizontal: 25,\n    marginVertical: 5,\n  },\n  commentContainer: {},\n  imageIcon: {\n    width: 28,\n    height: 28,\n    borderRadius: 14,\n  },\n  textInput: {\n    backgroundColor: \"white\",\n    padding: 12,\n    borderRadius: 10,\n    borderWidth: 1.5,\n    borderColor: \"lightgrey\",\n    marginVertical: 5,\n    width: 250,\n    maxHeight: 100,\n  },\n  sendButton: {\n    color: \"#1267E9\",\n    fontWeight: \"bold\",\n  },\n  sendButtonDisabled: {\n    color: \"grey\",\n    fontWeight: \"bold\",\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}