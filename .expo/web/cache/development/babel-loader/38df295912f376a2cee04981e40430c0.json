{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport React, { useEffect, useState } from \"react\";\nimport { auth, db } from \"../../Firebase\";\nimport { onSnapshot, doc, updateDoc, arrayUnion } from \"firebase/firestore\";\nimport { TouchableOpacity } from \"react-native-gesture-handler\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar user = auth.currentUser;\n\nvar AddComment = function AddComment(_ref) {\n  var post = _ref.post;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      currentLoggedInUser = _useState2[0],\n      setCurrentLoggedInUser = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      comment = _useState4[0],\n      setComment = _useState4[1];\n\n  var getUserDetails = function getUserDetails() {\n    var unsubscribe = onSnapshot(doc(db, \"users\", auth.currentUser.email), function (doc) {\n      setCurrentLoggedInUser({\n        fullname: doc.data().fullname,\n        profile_picture: doc.data().profile_picture\n      });\n    });\n    return unsubscribe;\n  };\n\n  useEffect(function () {\n    getUserDetails();\n  }, []);\n\n  var handleComment = function handleComment() {\n    updateDoc(doc(db, \"posts\", post.id), {\n      comments: arrayUnion({\n        image: currentLoggedInUser.profile_picture,\n        user: currentLoggedInUser.fullname,\n        comment: comment\n      })\n    });\n  };\n\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(View, {\n      children: currentLoggedInUser.profile_picture != null ? _jsx(Image, {\n        style: styles.imageIcon,\n        source: {\n          uri: currentLoggedInUser.profile_picture\n        }\n      }) : _jsx(Image, {\n        style: [styles.imageIcon, {\n          tintColor: \"grey\"\n        }],\n        source: require(\"../../assets/profileIcon.png\")\n      })\n    }), _jsx(TextInput, {\n      placeholder: \"Add a comment\",\n      autoCapitalize: \"none\",\n      multiline: true,\n      value: comment,\n      onChangeText: function onChangeText(text) {\n        return setComment(text);\n      },\n      style: styles.textInput\n    }), !comment ? _jsx(Text, {\n      style: styles.sendButtonDisabled,\n      children: \"Send\"\n    }) : _jsx(TouchableOpacity, {\n      onPress: handleComment,\n      children: _jsx(Text, {\n        style: styles.sendButton,\n        children: \"Send\"\n      })\n    })]\n  });\n};\n\nexport default AddComment;\nvar styles = StyleSheet.create({\n  container: {\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    flexDirection: \"row\",\n    marginHorizontal: 25,\n    marginVertical: 5\n  },\n  commentContainer: {},\n  imageIcon: {\n    width: 28,\n    height: 28,\n    borderRadius: 14\n  },\n  textInput: {\n    backgroundColor: \"white\",\n    padding: 12,\n    borderRadius: 10,\n    borderWidth: 1.5,\n    borderColor: \"lightgrey\",\n    marginVertical: 5,\n    width: 250,\n    maxHeight: 100\n  },\n  sendButton: {\n    color: \"#1267E9\",\n    fontWeight: \"bold\"\n  },\n  sendButtonDisabled: {\n    color: \"grey\",\n    fontWeight: \"bold\"\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","auth","db","onSnapshot","doc","updateDoc","arrayUnion","TouchableOpacity","user","currentUser","AddComment","post","currentLoggedInUser","setCurrentLoggedInUser","comment","setComment","getUserDetails","unsubscribe","email","fullname","data","profile_picture","handleComment","id","comments","image","styles","container","imageIcon","uri","tintColor","require","text","textInput","sendButtonDisabled","sendButton","StyleSheet","create","alignItems","justifyContent","flexDirection","marginHorizontal","marginVertical","commentContainer","width","height","borderRadius","backgroundColor","padding","borderWidth","borderColor","maxHeight","color","fontWeight"],"sources":["/Users/startek/LocalRepo/journeytoaustralia/components/home/AddComment.js"],"sourcesContent":["import { View, Text, StyleSheet, Image, TextInput } from \"react-native\";\nimport React, { useEffect, useState } from \"react\";\nimport { auth, db } from \"../../Firebase\";\nimport { onSnapshot, doc, updateDoc, arrayUnion } from \"firebase/firestore\";\nimport { TouchableOpacity } from \"react-native-gesture-handler\";\n\nconst user = auth.currentUser;\n\nconst AddComment = ({post}) => {\n  const [currentLoggedInUser, setCurrentLoggedInUser] = useState([]);\n  const [comment, setComment] = useState(null);\n\n  const getUserDetails = () => {\n    const unsubscribe = onSnapshot(\n      doc(db, \"users\", auth.currentUser.email),\n      (doc) => {\n        setCurrentLoggedInUser({\n          fullname: doc.data().fullname,\n          profile_picture: doc.data().profile_picture,\n        });\n      }\n    );\n    return unsubscribe;\n  };\n\n  useEffect(() => {\n    getUserDetails();\n  }, []);\n\n  const handleComment = () => {\n    updateDoc(doc(db, \"posts\", post.id), {\n      comments: arrayUnion({\n        image: currentLoggedInUser.profile_picture,\n        user: currentLoggedInUser.fullname,\n        comment: comment,\n      }),\n    });\n  };\n\n  // const handleLike = (post) => {\n  //   const currentLikeStatus = !post.likes.includes(user.email);\n  //   updateDoc(doc(db, \"posts\", post.id), {\n  //     likes: currentLikeStatus\n  //       ? arrayUnion(user.email)\n  //       : arrayRemove(user.email),\n  //   });\n  // };\n\n  return (\n    <View style={styles.container}>\n      <View>\n        {currentLoggedInUser.profile_picture != null ? (\n          <Image\n            style={styles.imageIcon}\n            source={{ uri: currentLoggedInUser.profile_picture }}\n          />\n        ) : (\n          <Image\n            style={[styles.imageIcon, { tintColor: \"grey\" }]}\n            source={require(\"../../assets/profileIcon.png\")}\n          />\n        )}\n      </View>\n      <TextInput\n        placeholder=\"Add a comment\"\n        autoCapitalize=\"none\"\n        multiline={true}\n        //autoFocus={true}\n        value={comment}\n        onChangeText={(text) => setComment(text)}\n        style={styles.textInput}\n      />\n      {!comment ? (\n        <Text style={styles.sendButtonDisabled}>Send</Text>\n      ) : (\n        <TouchableOpacity onPress={handleComment}>\n          <Text style={styles.sendButton}>Send</Text>\n        </TouchableOpacity>\n      )}\n    </View>\n  );\n};\n\nexport default AddComment;\n\nconst styles = StyleSheet.create({\n  container: {\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    flexDirection: \"row\",\n    marginHorizontal: 25,\n    marginVertical: 5,\n  },\n  commentContainer: {},\n  imageIcon: {\n    width: 28,\n    height: 28,\n    borderRadius: 14,\n  },\n  textInput: {\n    backgroundColor: \"white\",\n    padding: 12,\n    borderRadius: 10,\n    borderWidth: 1.5,\n    borderColor: \"lightgrey\",\n    marginVertical: 5,\n    width: 250,\n    maxHeight: 100,\n  },\n  sendButton: {\n    color: \"#1267E9\",\n    fontWeight: \"bold\",\n  },\n  sendButtonDisabled: {\n    color: \"grey\",\n    fontWeight: \"bold\",\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}