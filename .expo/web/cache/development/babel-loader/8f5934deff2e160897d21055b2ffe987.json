{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _wrapNativeSuper from \"@babel/runtime/helpers/wrapNativeSuper\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nexport var NativeError = function (_Error) {\n  _inherits(NativeError, _Error);\n  var _super = _createSuper(NativeError);\n  function NativeError(nativeError, jsStack, namespace) {\n    var _this;\n    _classCallCheck(this, NativeError);\n    _this = _super.call(this);\n    _defineProperty(_assertThisInitialized(_this), \"namespace\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"code\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"message\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"jsStack\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"userInfo\", void 0);\n    var userInfo = nativeError.userInfo;\n    _this.namespace = namespace;\n    _this.code = _this.namespace + \"/\" + (userInfo.code || 'unknown');\n    _this.message = \"[\" + _this.code + \"] \" + userInfo.message;\n    _this.jsStack = jsStack;\n    _this.userInfo = userInfo;\n    _this.stack = NativeError.getStackWithMessage(\"NativeError: \" + _this.message, _this.jsStack);\n    return _this;\n  }\n  _createClass(NativeError, null, [{\n    key: \"fromEvent\",\n    value: function fromEvent(errorEvent, namespace, stack) {\n      return new NativeError({\n        userInfo: errorEvent\n      }, stack || new Error().stack || '', namespace);\n    }\n  }, {\n    key: \"getStackWithMessage\",\n    value: function getStackWithMessage(message, jsStack) {\n      return [message].concat(_toConsumableArray(jsStack.split('\\n').slice(2, 13))).join('\\n');\n    }\n  }]);\n  return NativeError;\n}(_wrapNativeSuper(Error));","map":{"version":3,"sources":["NativeError.ts"],"names":["NativeError","Error","errorEvent","namespace","stack","userInfo","constructor","nativeError","jsStack","code","message","getStackWithMessage","split","slice","join"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAiBA,WAAaA,WAAW;EAAA;EAAA;EAetBM,qBACEC,WAA4D,EAC5DC,OAAe,EACfL,SAAiB,EACjB;IAAA;IAAA;IACA;IAAQ,eAAA,gCAAA,WAAA,EAAA,KAAA,CAAA,CAAA;IAAA,eAAA,gCAAA,MAAA,EAAA,KAAA,CAAA,CAAA;IAAA,eAAA,gCAAA,SAAA,EAAA,KAAA,CAAA,CAAA;IAAA,eAAA,gCAAA,SAAA,EAAA,KAAA,CAAA,CAAA;IAAA,eAAA,gCAAA,UAAA,EAAA,KAAA,CAAA,CAAA;IACR,IAAQE,QAAAA,GAAaE,WAAW,CAAxBF,QAAAA;IACR,MAAKF,SAAS,GAAGA,SAAS;IAC1B,MAAKM,IAAI,GAAM,MAAKN,SAAU,UAAGE,QAAQ,CAACI,IAAI,IAAI,SAAU,CAAC;IAC7D,MAAKC,OAAO,SAAO,MAAKD,IAAK,UAAIJ,QAAQ,CAACK,OAAS;IACnD,MAAKF,OAAO,GAAGA,OAAO;IACtB,MAAKH,QAAQ,GAAGA,QAAQ;IACxB,MAAKD,KAAK,GAAGJ,WAAW,CAACW,mBAAmB,mBAAiB,MAAKD,OAAQ,EAAG,MAAKF,OAAO,CAAC;IAAA;EAC5F;EAAA;IAAA;IAAA,OArBA,mBACEN,UAA6C,EAC7CC,SAAiB,EACjBC,KAAc,EACd;MACA,OAAO,IAAIJ,WAAW,CAAC;QAAEK,QAAQ,EAAEH;MAAW,CAAC,EAAEE,KAAK,IAAI,IAAIH,KAAK,EAAE,CAACG,KAAK,IAAI,EAAE,EAAED,SAAS,CAAC;IAC/F;EAAA;IAAA;IAAA,OAsBA,6BAA2BO,OAAe,EAAEF,OAAe,EAAE;MAC3D,OAAO,CAACE,OAAO,4BAAKF,OAAO,CAACI,KAAK,CAAC,IAAI,CAAC,CAACC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,GAAEC,IAAI,CAAC,IAAI,CAAC;IAClE;EAAA;EAAA;AAAA,mBArC+Bb,KAAK","sourceRoot":"../../src","sourcesContent":["function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n/*\n * Copyright (c) 2016-present Invertase Limited & Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this library except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nexport class NativeError extends Error {\n  static fromEvent(errorEvent, namespace, stack) {\n    return new NativeError({\n      userInfo: errorEvent\n    }, stack || new Error().stack || '', namespace);\n  }\n  constructor(nativeError, jsStack, namespace) {\n    super();\n    _defineProperty(this, \"namespace\", void 0);\n    _defineProperty(this, \"code\", void 0);\n    _defineProperty(this, \"message\", void 0);\n    _defineProperty(this, \"jsStack\", void 0);\n    _defineProperty(this, \"userInfo\", void 0);\n    const {\n      userInfo\n    } = nativeError;\n    this.namespace = namespace;\n    this.code = `${this.namespace}/${userInfo.code || 'unknown'}`;\n    this.message = `[${this.code}] ${userInfo.message}`;\n    this.jsStack = jsStack;\n    this.userInfo = userInfo;\n    this.stack = NativeError.getStackWithMessage(`NativeError: ${this.message}`, this.jsStack);\n  }\n\n  /**\n   * Build a stack trace that includes JS stack prior to calling the native method.\n   *\n   * @returns {string}\n   */\n  static getStackWithMessage(message, jsStack) {\n    return [message, ...jsStack.split('\\n').slice(2, 13)].join('\\n');\n  }\n}\n//# sourceMappingURL=NativeError.js.map"]},"metadata":{},"sourceType":"module"}