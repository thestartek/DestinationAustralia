{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport React, { useEffect, useState } from \"react\";\nimport Header from \"../components/home/Header.js\";\nimport Post4home from \"../components/home/Post4home.js\";\nimport { collection, onSnapshot, orderBy, limit, query } from \"firebase/firestore\";\nimport { db, auth } from \"../Firebase\";\nimport { TouchableOpacity } from \"react-native-gesture-handler\";\nimport { Divider } from \"react-native-paper\";\nimport Highlights from \"../components/home/Highlights.js\";\nimport NewsPost from \"../components/home/NewsPost.js\";\nimport CommunityScreen from \"../components/learn/LearnScreen.js\";\nimport Post from \"../components/post/Post.js\";\nimport CommunityStack from \"../components/CommunityStack.js\";\nimport Tools4Home from \"../components/home/Tools4Home.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar HomeScreen = function HomeScreen(_ref) {\n  var isLoading = _ref.isLoading,\n    navigation = _ref.navigation;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    posts = _useState2[0],\n    setPosts = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var _useState5 = useState([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    newsposts = _useState6[0],\n    setNewsPosts = _useState6[1];\n  var _useState7 = useState([]),\n    _useState8 = _slicedToArray(_useState7, 2),\n    highlights = _useState8[0],\n    setHighlights = _useState8[1];\n  var user = auth.currentUser;\n  useEffect(function () {\n    var unsub = onSnapshot(query(collection(db, \"highlights\"), orderBy(\"date\", \"desc\")), function (snapshot) {\n      setHighlights(snapshot.docs.map(function (highlights) {\n        return _objectSpread({\n          id: highlights.id\n        }, highlights.data());\n      }));\n      if (loading) {\n        setLoading(false);\n      }\n    });\n    return unsub;\n  }, []);\n  useEffect(function () {\n    var unsub = onSnapshot(query(collection(db, \"posts\"), orderBy(\"created\", \"desc\"), limit(6)), function (snapshot) {\n      setPosts(snapshot.docs.map(function (post) {\n        return _objectSpread({\n          id: post.id\n        }, post.data());\n      }));\n      if (loading) {\n        setLoading(false);\n      }\n    });\n    return unsub;\n  }, []);\n  useEffect(function () {\n    var unsub = onSnapshot(query(collection(db, \"newsposts\"), orderBy(\"date\", \"desc\")), function (snapshot) {\n      setNewsPosts(snapshot.docs.map(function (newspost) {\n        return _objectSpread({\n          id: newspost.id\n        }, newspost.data());\n      }));\n      if (loading) {\n        setLoading(false);\n      }\n    });\n    return unsub;\n  }, []);\n  return _jsxs(View, {\n    style: styles.mainContainer,\n    children: [_jsx(Header, {\n      navigation: navigation\n    }), _jsx(Divider, {\n      width: 8\n    }), _jsxs(ScrollView, {\n      style: styles.highlightsContainer,\n      children: [_jsxs(View, {\n        style: {\n          backgroundColor: \"white\",\n          borderBottomLeftRadius: 10,\n          borderBottomRightRadius: 10,\n          marginBottom: 5\n        },\n        children: [_jsx(Text, {\n          style: styles.headingText,\n          children: \"Highlights\"\n        }), _jsx(ScrollView, {\n          horizontal: true,\n          children: highlights.map(function (highlights, index) {\n            return _jsx(Highlights, {\n              highlights: highlights,\n              navigation: navigation\n            }, index);\n          })\n        })]\n      }), _jsxs(View, {\n        style: styles.innerContainer,\n        children: [_jsx(Text, {\n          style: styles.headingText,\n          children: \"Latest posts\"\n        }), _jsx(ScrollView, {\n          horizontal: true,\n          children: posts.map(function (post, index) {\n            return _jsx(Post4home, {\n              post: post,\n              navigation: navigation\n            }, index);\n          })\n        }), _jsx(TouchableOpacity, {\n          onPress: function onPress() {\n            return navigation.push(\"Posts\");\n          },\n          children: _jsx(Text, {\n            style: styles.seeMoreText,\n            children: \"More posts...\"\n          })\n        })]\n      }), _jsx(Divider, {\n        style: {\n          height: 5\n        }\n      }), _jsx(Text, {\n        style: styles.headingText,\n        children: \"Tools\"\n      }), _jsx(Tools4Home, {\n        navigation: navigation\n      }), _jsx(TouchableOpacity, {\n        onPress: function onPress() {\n          return navigation.push(\"Tools\");\n        },\n        children: _jsx(Text, {\n          style: styles.seeMoreText,\n          children: \"More tools...\"\n        })\n      }), _jsx(Divider, {\n        style: {\n          height: 5\n        }\n      }), _jsxs(View, {\n        children: [_jsx(Text, {\n          style: styles.headingText,\n          children: \"Latest News\"\n        }), _jsx(View, {\n          children: newsposts.map(function (newspost, index) {\n            return _jsx(NewsPost, {\n              newspost: newspost,\n              navigation: navigation\n            }, index);\n          })\n        })]\n      })]\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  mainContainer: {\n    flex: 1\n  },\n  outerContainer: {\n    backgroundColor: \"lightgrey\"\n  },\n  innerContainer: {\n    borderRadius: 10,\n    marginHorizontal: 10,\n    backgroundColor: \"white\"\n  },\n  headingText: {\n    margin: 10,\n    fontWeight: \"bold\",\n    fontSize: 20,\n    fontWeight: \"bold\",\n    fontSize: 20,\n    margin: 10\n  },\n  seeMoreText: {\n    textAlign: \"center\",\n    color: \"#1267E9\",\n    marginVertical: 20,\n    fontSize: 15,\n    fontWeight: \"bold\"\n  }\n});\nexport default HomeScreen;","map":{"version":3,"names":["React","useEffect","useState","Header","Post4home","collection","onSnapshot","orderBy","limit","query","db","auth","TouchableOpacity","Divider","Highlights","NewsPost","CommunityScreen","Post","CommunityStack","Tools4Home","HomeScreen","isLoading","navigation","posts","setPosts","loading","setLoading","newsposts","setNewsPosts","highlights","setHighlights","user","currentUser","unsub","snapshot","docs","map","id","data","post","newspost","styles","mainContainer","highlightsContainer","backgroundColor","borderBottomLeftRadius","borderBottomRightRadius","marginBottom","headingText","index","innerContainer","push","seeMoreText","height","StyleSheet","create","flex","outerContainer","borderRadius","marginHorizontal","margin","fontWeight","fontSize","textAlign","color","marginVertical"],"sources":["/Users/startek/LocalRepo/journeytoaustralia/screens/HomeScreen.js"],"sourcesContent":["import { ScrollView, StyleSheet, View, Text } from \"react-native\";\nimport React, { useEffect, useState } from \"react\";\nimport Header from \"../components/home/Header.js\";\nimport Post4home from \"../components/home/Post4home.js\";\nimport {\n  collection,\n  onSnapshot,\n  orderBy,\n  limit,\n  query,\n} from \"firebase/firestore\";\nimport { db, auth } from \"../Firebase\";\nimport { TouchableOpacity } from \"react-native-gesture-handler\";\nimport { Divider } from \"react-native-paper\";\nimport Highlights from \"../components/home/Highlights.js\";\nimport NewsPost from \"../components/home/NewsPost.js\";\nimport CommunityScreen from \"../components/learn/LearnScreen.js\";\nimport Post from \"../components/post/Post.js\";\nimport CommunityStack from \"../components/CommunityStack.js\";\nimport Tools4Home from \"../components/home/Tools4Home.js\";\n\nconst HomeScreen = ({ isLoading, navigation }) => {\n  const [posts, setPosts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [newsposts, setNewsPosts] = useState([]);\n  const [highlights, setHighlights] = useState([]);\n  const user = auth.currentUser;\n\n  useEffect(() => {\n    const unsub = onSnapshot(\n      query(collection(db, \"highlights\"), orderBy(\"date\", \"desc\")),\n      (snapshot) => {\n        setHighlights(\n          snapshot.docs.map((highlights) => ({\n            id: highlights.id,\n            ...highlights.data(),\n          }))\n        );\n        if (loading) {\n          setLoading(false);\n        }\n      }\n    );\n    return unsub;\n  }, []);\n\n  useEffect(() => {\n    const unsub = onSnapshot(\n      query(collection(db, \"posts\"), orderBy(\"created\", \"desc\"), limit(6)),\n      (snapshot) => {\n        setPosts(\n          snapshot.docs.map((post) => ({ id: post.id, ...post.data() }))\n        );\n        if (loading) {\n          setLoading(false);\n        }\n      }\n    );\n    return unsub;\n  }, []);\n\n  // const q = query(collection(db, \"newspost\"), where(\"date\", \"==\", \"27 Nov\"));\n  // const unsubscribe = onSnapshot(q, (querySnapshot) => {\n  //   const newsposts = [];\n  //   querySnapshot.forEach((doc) => {\n  //     newspost.push(doc.data().name);\n  //   });\n  //   console.log(\"Current cities in CA: \", cities.join(\", \"));\n  // });\n\n  useEffect(() => {\n    const unsub = onSnapshot(\n      query(collection(db, \"newsposts\"), orderBy(\"date\", \"desc\")),\n      (snapshot) => {\n        setNewsPosts(\n          snapshot.docs.map((newspost) => ({\n            id: newspost.id,\n            ...newspost.data(),\n          }))\n        );\n        if (loading) {\n          setLoading(false);\n        }\n      }\n    );\n    return unsub;\n  }, []);\n\n  return (\n    <View style={styles.mainContainer}>\n      <Header navigation={navigation} />\n      <Divider width={8} />\n      {/* <Text style={styles.headingText}>Highlights</Text> */}\n\n      <ScrollView style={styles.highlightsContainer}>\n        <View\n          style={{\n            backgroundColor: \"white\",\n            borderBottomLeftRadius: 10,\n            borderBottomRightRadius: 10,\n            marginBottom: 5\n          }}\n        >\n          <Text style={styles.headingText}>Highlights</Text>\n          <ScrollView horizontal={true}>\n            {highlights.map((highlights, index) => (\n              <Highlights\n                highlights={highlights}\n                key={index}\n                navigation={navigation}\n              />\n            ))}\n          </ScrollView>\n        </View>\n\n        {/* <Divider style={{ height: 5 }} /> */}\n\n        <View style={styles.innerContainer}>\n          <Text style={styles.headingText}>Latest posts</Text>\n          <ScrollView horizontal={true}>\n            {posts.map((post, index) => (\n              <Post4home post={post} key={index} navigation={navigation} />\n            ))}\n          </ScrollView>\n          <TouchableOpacity onPress={() => navigation.push(\"Posts\")}>\n            <Text style={styles.seeMoreText}>More posts...</Text>\n          </TouchableOpacity>\n        </View>\n\n        <Divider style={{ height: 5 }} />\n        <Text style={styles.headingText}>Tools</Text>\n        {/* List tools here */}\n        <Tools4Home navigation={navigation} />\n\n        <TouchableOpacity onPress={() => navigation.push(\"Tools\")}>\n          <Text style={styles.seeMoreText}>More tools...</Text>\n        </TouchableOpacity>\n\n        <Divider style={{ height: 5 }} />\n\n        <View>\n          <Text style={styles.headingText}>Latest News</Text>\n          <View>\n            {newsposts.map((newspost, index) => (\n              <NewsPost\n                newspost={newspost}\n                key={index}\n                navigation={navigation}\n              />\n            ))}\n          </View>\n        </View>\n      </ScrollView>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  mainContainer: {\n    // backgroundColor: \"white\",\n    flex: 1,\n  },\n  outerContainer: {\n    backgroundColor: \"lightgrey\",\n  },\n  innerContainer: {\n    borderRadius: 10,\n    marginHorizontal: 10,\n    backgroundColor: \"white\",\n  },\n  headingText: {\n    margin: 10,\n    fontWeight: \"bold\",\n    fontSize: 20,\n    fontWeight: \"bold\",\n    fontSize: 20,\n    margin: 10,\n  },\n  seeMoreText: {\n    textAlign: \"center\",\n    color: \"#1267E9\",\n    marginVertical: 20,\n    fontSize: 15,\n    fontWeight: \"bold\",\n  },\n});\nexport default HomeScreen;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}